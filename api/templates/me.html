{% extends "layout.html" %}

{% block title %}
    {{ user["name"] }}
{% endblock %}

{% block body %}
    <main class="bg-white w-full md:w-3/4 h-screen-dynamic text-start flex flex-col p-5">
        <header class="border-b border-gray-400 pb-6">
            <div class="flex mt-3 pl-3 sm:pl-10">
                <div class="mr-8 w-[140px]">
                    <img src="{{ url_for('static', filename=user['profile_pic']) }}" class="w-full rounded-full">
                </div>
                <div class="mt-5">
                    <div class="flex items-center flex-wrap">
                        <h2 class="text-[18px] font-semibold mr-5">@{{ user["name"] }}</h2>
                        <div class="flex text-[14px] md:text-[16px]">
                            <a href="/{{ user['name'] }}/followers" class="text-center mr-5 flex items-center hover:underline">
                                <span class="self-center mr-2">{{ user["followers"]}}</span> 
                                seguidores
                            </a>
                            <a href="/{{ user['name'] }}/following" class="text-center flex items-center hover:underline">
                                <span class="self-center mr-2">{{ user["following"]}} </span> 
                                seguindo
                            </a>
                        </div>
                    </div>
                        <div class="relative z-10 block max-w-[%] my-3 text-[15px] text-justify">
                            <p style="word-wrap: break-word; overflow-wrap: break-word;" class="max-w-full">{{ user['bio'] | safe }}</p>
                        </div>
                </div>
            </div>

            
            <div class="mt-5 flex sm:px-3">
                <a href="/edit" class="flex justify-center items-center w-full p-2 m-1 text-white font-semibold text-center rounded-md bg-purple-700 hover:bg-purple-800 cursor-pointer">
                    <span class="mr-2">Editar perfil</span>
                    <svg xmlns="http://www.w3.org/2000/svg" width="1.2em" height="1.2em" viewBox="0 0 24 24"><path fill="none" stroke="white" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="m14.304 4.844l2.852 2.852M7 7H4a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h11a1 1 0 0 0 1-1v-4.5m2.409-9.91a2.017 2.017 0 0 1 0 2.853l-6.844 6.844L8 14l.713-3.565l6.844-6.844a2.015 2.015 0 0 1 2.852 0Z"/></svg>
                </a>
                <a href="/add" class="flex justify-center items-center w-full p-2 m-1 text-white font-semibold rounded-md bg-purple-700 hover:bg-purple-800 cursor-pointer">
                    <span class="mr-2">Nova publicação</span>
                    <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 48 48"><g fill="none" stroke="white" stroke-linejoin="round" stroke-width="6"><rect width="36" height="36" x="6" y="6" rx="3"/><path stroke-linecap="round" d="M24 16v16m-8-8h16"/></g></svg>
                </a>
            </div>
        </header>
        <section class="flex justify-center items-center h-full">
            {% if user.posts %}
                {% for post in user.posts %}   
                    {% if post['image_path'] %}
                        <a href="/post?id={{ post['id'] }}">
                            <img src="{{ url_for('static', filename=post.image_path) }}" width="200px">
                        </a>
                    {% endif %}
                {% endfor %}
            {% else %}
                <span>
                    Sem publicações ainda
                </span>
            {% endif %}
        </section>
    </main>
{% endblock %}