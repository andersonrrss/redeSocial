{% extends "layout.html" %}

{% block title %}
    Conversar
{% endblock %}

{% block script %}
<script src="../static/js/chat_handler.js"> </script>
{% endblock %}

{% block body %}
    <main class="bg-white w-full md:w-3/4 h-screen text-start p-5 flex flex-col">
        <header>
            <h2 class="text-center m-2 text-2xl font-semibold text-purple-800">Conversar</h2>
        </header>
        <section id="chat_section">
            {% if empty %}
                <span>Sem nenhuma conversa dispon√≠vel..</span>
            {% else %}
                {% if chats %}
                    <h2 class="text-gray-700 font-semibold text-lg mb-2 border-b border-gray-400">Continue suas conversas!</h2>
                    {% for chat in chats %}
                        <a href="/chat/{{ chat['id'] }}" class="flex w-full items-center hover:bg-gray-300 p-1 rounded-sm">
                            <img src="{{ url_for('static', filename=chat['receiver']['profile_pic']) }}" alt="Avatar" class="rounded-full w-9 mx-2">
                            <span>{{ chat["receiver"]["name"] }}</span>
                        </a>
                    {% endfor %}
                {% endif %}

                {% if sugestions  %}
                    <h2 class="text-gray-700 font-semibold text-lg mb-2 border-b border-gray-400">Inicie novas conversas!</h2>
                    {% for user in sugestions %}
                        <a href="/newchat?receiver={{ user['id'] }}" class="flex w-full items-center hover:bg-gray-300 p-1 rounded-sm">
                            <img src="{{ url_for('static', filename=user['profile_pic']) }}" alt="Avatar" class="rounded-full w-9 mx-2">
                            <span>{{ user["name"] }}</span>
                        </a>
                    {% endfor %}
                {% endif %}
            {% endif %}
        </section>
    </main>
{% endblock %}